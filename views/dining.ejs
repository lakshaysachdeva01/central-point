<%- include('header'), {seoDetails} %>

<% 
  // Function to extract video ID from YouTube URL
  function getYouTubeVideoId(url) {
    if (!url) return '';
    let videoId = '';
    if (url.includes('youtu.be/')) {
      videoId = url.split('youtu.be/')[1]?.split('?')[0];
    } else if (url.includes('youtube.com/watch')) {
      videoId = url.split('v=')[1]?.split('&')[0];
    } else if (url.includes('youtube.com/embed/')) {
      videoId = url.split('youtube.com/embed/')[1]?.split('?')[0];
    }
    return videoId;
  }

  // YouTube video URL
  const youtubeUrl = 'https://www.youtube.com/watch?v=CFPk_JgcXyA';
  const videoId = getYouTubeVideoId(youtubeUrl);
  const hasYouTubeVideo = videoId && videoId !== '';
%>

<header class="header">
    <div class="video-fullscreen-wrap">
        <div class="video-fullscreen-video" data-overlay-dark="4">
            <% if (hasYouTubeVideo) { %>
                <!-- YouTube Video Embed -->
                <div class="youtube-video-container" id="youtube-dining-video">
                    <iframe 
                        id="youtube-dining-iframe"
                        class="youtube-banner-iframe"
                        src="https://www.youtube.com/embed/<%= videoId %>?autoplay=1&mute=1&loop=1&playlist=<%= videoId %>&controls=0&modestbranding=1&rel=0&showinfo=0&iv_load_policy=3&disablekb=1&fs=0&playsinline=1&enablejsapi=1&origin=<%= typeof baseUrl !== 'undefined' ? encodeURIComponent(baseUrl) : '' %>"
                        frameborder="0"
                        allow="autoplay; encrypted-media"
                        allowfullscreen="false"
                        title="Hotel Restaurant"
                        loading="eager">
                    </iframe>
                    <!-- Overlay to block all user interactions -->
                    <div class="youtube-video-overlay"></div>
                </div>
            <% } else { %>
                <!-- Fallback to banner image -->
                <div style="background-image: url('img/banner/11.jpg'); background-size: cover; background-position: center; width: 100%; height: 100%;"></div>
            <% } %>
        </div>
        <div class="v-middle">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8 col-md-12 text-center">
                        <h5>Address of taste</h5>
                        <h1>Khana Khazana</h1>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<% if (hasYouTubeVideo) { %>
<script>
  // Load YouTube IFrame API
  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var ytDiningPlayer;
  
  function onYouTubeIframeAPIReady() {
    ytDiningPlayer = new YT.Player('youtube-dining-iframe', {
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange
      }
    });
  }

  function onPlayerReady(event) {
    // Set video quality to highest available (2160p if available)
    event.target.setPlaybackQuality('hd2160');
    // Force quality if available, otherwise fallback to next highest
    setTimeout(function() {
      var quality = event.target.getPlaybackQuality();
      if (quality !== 'hd2160') {
        // Try to set to highest available quality
        event.target.setPlaybackQuality('highres');
      }
    }, 1000);
    
    // Ensure video is playing and muted
    event.target.mute();
    event.target.playVideo();
  }

  function onPlayerStateChange(event) {
    // Loop the video when it ends
    if (event.data === YT.PlayerState.ENDED) {
      event.target.playVideo();
    }
  }

  // Expose function globally for YouTube API
  window.onYouTubeIframeAPIReady = onYouTubeIframeAPIReady;
</script>
<% } %>
    <!-- Page Details -->
    <section class="page-details section-padding">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="section-subtitle">Address of taste</div>
                    <div class="section-title">About Restaurant</div>
                </div>
            </div>
            <div class="row mb-30">
                <div class="col-md-12">
                    <p>Khana Khazana is CPI's elegant multi-cuisine restaurant, crafted to deliver a delightful dining experience in a warm and comfortable setting. With a seating capacity of 50+ guests, it offers the perfect space for families, business diners, and leisure guests to enjoy thoughtfully prepared meals. The restaurant features a carefully curated menu that blends authentic Indian flavours with popular global cuisines, ensuring variety, quality, and consistency in every dish.</p>
                    <p>Designed for both in-house guests and local patrons, Khana Khazana stands out for its welcoming ambience, attentive service, and focus on taste and presentation. Whether you're starting your day with a hearty meal, enjoying a relaxed lunch, or unwinding over dinner, the restaurant promises a satisfying culinary journey that reflects CPI's commitment to hospitality, comfort, and refined dining.</p>
                </div>
            </div>
           
        </div>
    </section>
    <!-- Restaurant Menu -->
   
    <!-- Gallery Image -->
    <section class="galleryscroll section-padding bg-lightbrown">
        <div class="container-fluid p-0">
            <div class="row justify-content-center">
                <div class="col-md-12 text-center mb-20">
                    <div class="section-subtitle">Image Gallery</div>
                    <div class="section-title">Restaurant Gallery</div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="owl-carousel owl-theme">
                        <div class="item">
                            <a href="/assets/img/Khanakhazana/0L4A6972.webp" title="" class="gallery-masonry-item-img-link img-zoom">
                                <div class="img"> <img src="/assets/img/Khanakhazana/0L4A6972.webp" class="img-fluid mx-auto d-block" alt=""> </div>
                            </a>
                        </div>
                        <div class="item">
                            <a href="/assets/img/Khanakhazana/0L4A6974.webp" title="" class="gallery-masonry-item-img-link img-zoom">
                                <div class="img"> <img src="/assets/img/Khanakhazana/0L4A6974.webp" class="img-fluid mx-auto d-block" alt=""> </div>
                            </a>
                        </div>
                        <div class="item">
                            <a href="/assets/img/Khanakhazana/0L4A6986.webp" title="" class="gallery-masonry-item-img-link img-zoom">
                                <div class="img"> <img src="/assets/img/Khanakhazana/0L4A6986.webp" class="img-fluid mx-auto d-block" alt=""> </div>
                            </a>
                        </div>
                        <div class="item">
                            <a href="/assets/img/Khanakhazana/0L4A6988.webp" title="" class="gallery-masonry-item-img-link img-zoom">
                                <div class="img"> <img src="/assets/img/Khanakhazana/0L4A6988.webp" class="img-fluid mx-auto d-block" alt=""> </div>
                            </a>
                        </div>
                        <div class="item">
                            <a href="/assets/img/Khanakhazana/0L4A7001.webp" title="" class="gallery-masonry-item-img-link img-zoom">
                                <div class="img"> <img src="/assets/img/Khanakhazana/0L4A7001.webp" class="img-fluid mx-auto d-block" alt=""> </div>
                            </a>
                        </div>
                        <div class="item">
                            <a href="/assets/img/Khanakhazana/0L4A7006.webp" title="" class="gallery-masonry-item-img-link img-zoom">
                                <div class="img"> <img src="/assets/img/Khanakhazana/0L4A7006.webp" class="img-fluid mx-auto d-block" alt=""> </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

<style>
    .galleryscroll .owl-carousel .item .img {
        height: 400px;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .galleryscroll .owl-carousel .item .img img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    
    @media (max-width: 768px) {
        .galleryscroll .owl-carousel .item .img {
            height: 300px;
        }
    }
</style>

<%- include('footer') %>